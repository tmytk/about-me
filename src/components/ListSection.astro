---
const {
    title = "",
    items = [],
    titleHref = "",
    emptyMessage = "No entries.",
    titleFont = "folder",
} = Astro.props;
const hasItems = items.length > 0;
---

<section class="section" data-section>
    <h2 class={titleFont === "inherit" ? "inherit-font" : ""}>
        {titleHref ? <a href={titleHref}>{title}</a> : title}
    </h2>
    <div class="cards">
        {hasItems
            ? items.map((item) => (
                  item.href ? (
                      <a
                          href={item.href}
                          class="card"
                          data-title={item.title}
                          target={item.external ? "_blank" : undefined}
                          rel={item.external ? "noopener noreferrer" : undefined}
                      >
                          <div class="title-row">
                              <h3>
                                  <span class="bullet">•</span>
                                  <span class="title-text">{item.title}</span>
                              </h3>
                              {item.date ? (
                                  <span class="date">{item.date}</span>
                              ) : null}
                          </div>
                          {item.desc ? <p class="muted">{item.desc}</p> : null}
                      </a>
                  ) : (
                      <article class="card" data-title={item.title}>
                          <div class="title-row">
                              <h3>
                                  <span class="bullet">•</span>
                                  <span class="title-text">{item.title}</span>
                              </h3>
                              {item.date ? (
                                  <span class="date">{item.date}</span>
                              ) : null}
                          </div>
                          {item.desc ? <p class="muted">{item.desc}</p> : null}
                      </article>
                  )
              ))
            : null}
        <p class={`empty ${hasItems ? "hidden" : ""}`} data-empty>
            {emptyMessage}
        </p>
    </div>
</section>

<style>
    .section h2 {
        font-size: 18px;
        margin-bottom: 12px;
        font-weight: 400;
        font-family: "Helvetica Neue", "Arial", "Hiragino Kaku Gothic ProN",
            "Hiragino Sans", "Yu Gothic", "Meiryo", sans-serif;
    }

    .section h2.inherit-font {
        font-family: inherit;
    }

    .section h2 a {
        color: inherit;
        text-decoration: none;
    }

    .section h2 a:hover {
        text-decoration: underline;
        text-decoration-thickness: 1px;
        text-underline-offset: 2px;
    }

    .cards {
        display: grid;
        gap: 10px;
    }

    .card {
        display: grid;
        gap: 6px;
        padding: 8px 0 8px 16px;
        border: none;
        border-radius: 0;
        background: transparent;
        text-decoration: none;
        color: inherit;
    }

    .card h3 {
        font-size: 16px;
        font-weight: 400;
    }

    .card h3::before {
        content: "";
    }

    .bullet {
        margin-right: 6px;
    }

    .card:hover .title-text {
        text-decoration: underline;
        text-decoration-thickness: 1px;
        text-underline-offset: 2px;
    }

    .title-row {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        gap: 12px;
    }

    .date {
        font-size: 12px;
        color: #616161;
        white-space: nowrap;
    }

    .muted {
        color: #3f3f3f;
    }

    .empty {
        color: #6b6b6b;
        font-size: 14px;
    }

    .empty.hidden {
        display: none;
    }
</style>
